# Asset and Portfolio Management
Once an organisation is registered into LocalFlex, its users can upload and manage their assets and portfolios on the platform via the following API endpoints:

## Create an asset

This Endpoint is to be used whenever an FSP wants to add a new single asset into the LocalFlex platform.

`POST` `/asset`

**Requested body schema of an** `asset`:


|Field|Description |Allowable responses/examples|
|---|---|---|
|assetType (*string*)|Type of asset| enum: `'Aggregated'`, `'Storage'`, `'Demand Response'`, `'Wind'`, `'Solar'`, `'CHP'`, `'EV'`, `'Other'` |
|mrid (*string*)|Identifier of the asset|'3fa85f64-5717-4562-b3fc-2c963f66afa6'|
|name (*string*)|Name of the asset chosen by the FSP|'MyAsset1'|
|flexibleCapacityDown (*number*)|The maximum flexibility that can be delivered from the asset in the downward direction|2|
|flexibleCapacityDownUnit (*string*)|The unit of measurement for the flexibilityCapacityDown. Currently only MW is supported.|enum: `'MW'`|
|flexibleCapacityUp (*number*)|The maximum flexibility that can be delivered from the asset in the upward direction|1|
|flexibleCapacityUpUnit (*string*)|The unit of measurement for the flexibilityCapacityUp. Currently only MW is supported.|enum: `'MW'`|
|usabilityCapacity (*number*)|The total energy capacity available from the asset in a single activation. I.e. short duration battery storage|1|
|usabilityCapacityUnit (*string*)|Usability Capacity Unit, currently only MWh is supported|enum: `'MWh'`|
|canProvideMetering (*boolean*)|Confirmation that sufficient metering data can be provided for the asset|enum: `true`, `false`|
|marketProducts (*string*)|Array of market product mrids that the asset will be used for. Enums show uuids for the Active Power 30M product and Active Power 60M product|enum: `'e0ff625b-d92f-436a-8124-26af86cc9fcf'`,`'6d40dc07-f91a-4b65-8e86-75dfc4448246'`|
|rampRateUp (*number*)|the rate at which the asset can modulate its output in the upward direction.|1000|
|rampRateUpUnit (*string*)|The rampRateUp Unit, currently only kW/min is supported.|enum: `'kW/min'`|
|rampRateDown (*number*)|the rate at which the asset can modulate its output in the downward direction|1000|
|rampRateDownUnit (*string*)|rampRateDown Unit, currently only kW/min is supported|enum: `'kW/min'`|
|minimumActivationTimeDuration (*string*)|The minimum duration the asset must be activated for - Duration in ISO 8601 format. Example: PT30M for 30 minutes, PT1H for 1 hour.|'PT30M'|
|maximumActivationTimeDuration (*string*)|The maximum duration the asset can maintain an activation - Duration in ISO 8601 format. Example: PT30M for 30 minutes, PT1H for 1 hour.|'PT1H'|
|responseTimeDuration (*string*)|The time required for the asset to to being activation after receiving an instruction - Duration in ISO 8601 format. Example: PT30M for 30 minutes, PT1H for 1 hour.|'PT15M'|
|recoveryTimeDuration (*string*)|The time required for the asset to rest after an activation - Duration in ISO 8601 format. Example: PT30M for 30 minutes, PT1H for 1 hour.|'PT30M'|
|contactName (*string*)|contact name for the point of contact for all onboarding processes and general activities regarding the asset|'John Doe'|
|phoneNumber (*string*)|Contact phone number for the point of contact|'07123 123456'|
|email (*string*)|Contact email address for the point of contact|'john.doe@email.com'|
|gridNodeMRID (*string*)|identifier for the trading node where the asset will be linked within the platform. If this is field is passed then the Postcode, Location and meter ids are not required|'271353f4-3e26-11e8-a2d3-5254004794ba'|
|importMeterId (*string*)|import meter identifier for the site where the asset is located|'202834028402'|
|exportMeterId (*string*)|export meter identifier for the site where the asset is located|'202834028402'|
|location (*string*)|the address where the asset is located|'Flat, Unit 1, The Praze, PENRYN, TR10 8AA, UNITED KINGDOM'|
|postcode (*string*)|postcode where the asset is located|'TR10 8AA'|





**Example:**
```
{
  "assetType": "Aggregated",
  "mrid":"3fa85f64-5717-4562-b3fc-2c963f66afa6"
  "name": "MyAsset1",
  "flexibleCapacityDown": 1,
  "flexibleCapacityDownUnit": "MW",
  "flexibleCapacityUp": 2,
  "flexibleCapacityUpUnit": "MW",
  "usabilityCapacity": 1,
  "usabilityCapacityUnit": "MWh",
  "canProvideMetering": true,
  "marketProducts": "6d40dc07-f91a-4b65-8e86-75dfc4448246"
  "rampRateUp": 500,
  "rampRateUpUnit": "kW/min",
  "rampRateDown": 1000,
  "rampRateDownUnit": "kW/min"
  "minimumActivationTimeDuration": "PT30M",
  "maximumActivationTimeDuration": "PT1H",
  "responseTimeDuration": "PT15M",
  "recoveryTimeDuration": "PT30M",
  "contactName": "John Doe",
  "phoneNumber": "07123 123456",
  "email": "john.doe@email.com",
  "gridNodeMRID": "271353f4-3e26-11e8-a2d3-5254004794ba",
  "importMeterId": "202834028402",
  "exportMeterId":"202834028402",
  "location": "Flat, Unit 1, The Praze, PENRYN, TR10 8AA, UNITED KINGDOM",
  "postcode": "TR10 8AA"
}
```
**Responses:**

`200` successful operation
```
{
  "result": asset{...},
  "status": true,
  "code": 200
}
```

`401` Access token is missing or invalid
```
{
  "result": "string",
  "status": true,
  "code": 401
}
```
`403` You don't have have the permission to access the response
```
{
  "result": "string",
  "status": true,
  "code": 403
}
```

## Update a single asset
This Endpoint is to be used whenever an FSP wants to update a single asset into the LocalFlex platform.

`PATCH` `/asset/{MRID}`

**Requested body schema of an** `asset`:
|Field|Description |Allowable responses/examples|
|---|---|---|
|assetType (*string*)|Type of asset| enum: `Aggregated`, `Wind`, `Solar`, `Non-Intermittent Generation`, `Biomass`, `EV`, `Other` |
|name (*string*)|Name of the asset chosen by the FSP|MyAsset1|
|siteMRID (*string*)|Universally unique ID of the site|"3fa85f64-5717-4562-b3fc-2c963f66afa6"|
|powerOutput (*number*)|The full load output of the asset |2 [kW]|
|powerOutputUnit (*string*)|Unit of the power output. By default it is set to kW|enum: `kW`, `MW`|
|usabilityCapacity (*number*)|Usability Capacity of the asset|20 [kWh]|
|usabilityCapacityUnit (*string*)|Unit of the Usability Capacity. By default it is set to kWh|enum: `kWh`, `MWh`|
|minimumActivationTime (*number*)|Minimum time duration for activation in Milliseconds|0|
|maximumActivationTime (*number*)|Maximum time duration for activation in Milliseconds|1.000.000|
|responseTime (*number*)|Minimum response time duration in Milliseconds to respond to an instruction|1000|
|recoveryTime (*number*)|The time required by the asset to recover from one instruction until the next instruction can be actioned, in Milliseconds.|1.000.000|
|canProvideMetering (*boolean*)|Indicator whether the asset can or cannot provide live metering|enum: `True`, `False`|
|soApproved (*boolean*)|Indicator of whether or not the system operator has approved the asset|enum: `True`, `False`|
|platformApproved (*boolean*)|Indicator of whether or not the localFlex admin has approved the asset|enum: `True`, `False`|
|powerOfAttorney (*boolean*)|Can provide power of attorney on-behalf|enum: `True`, `False`|
|rampRateUp (*number*)|The upward ramp rate of the asset|50 [kW/min]|
|rampRateUpUnit (*string*)|The unit of the upward ramp rate of the asset. By default it is set to kW/min|enum: `kW/min`, `MW/min`|
|rampRateDown (*number*)|The downward ramp rate of the asset|50 [kW/min]|
|rampRateDownUnit (*string*)|The unit of the downward ramp rate of the asset. By default it is set to kW/min|enum: `kW/min`, `MW/min`|

**Example:**
```
{
  "assetType": "Aggregated",
  "name": "string",
  "siteMrid": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
  "powerOutput": 0,
  "powerOutputUnit": "kW",
  "usabilityCapacity": 0,
  "usabilityCapacityUnit": "kWh",
  "minimumActivationTime": 0,
  "maximumActivationTime": 0,
  "responseTime": 0,
  "recoveryTime": 0,
  "canProvideMetering": true,
  "soApproved": true,
  "platformApproved": true,
  "powerOfAttorney": true,
  "rampRateUp": 0,
  "rampRateUpUnit": "kW/min",
  "rampRateDown": 0,
  "rampRateDownUnit": "kW/min"
}
```
**Responses:**

`200` successful operation
```
{
  "result": asset{...},
  "status": true,
  "code": 200
}
```

`401` Access token is missing or invalid
```
{
  "result": "string",
  "status": true,
  "code": 401
}
```
`403` You don't have have the permission to access the response
```
{
  "result": "string",
  "status": true,
  "code": 403
}
```



## Return a single asset
This Endpoint is to be used whenever an FSP wants to retrieve a single asset from the LocalFlex platform, based on the filtering from its mrid.

`GET` `/asset/{MRID}`

**Parameter** 
|Parameter|description|
|---|---|
|mrid|The universally unique ID of the asset's site|

**Responses:**

`200` successful operation
```
{
  "result": asset{...},
  "status": true,
  "code": 200
}
```

`401` Access token is missing or invalid
```
{
  "result": "string",
  "status": true,
  "code": 401
}
```
`403` You don't have have the permission to access the response
```
{
  "result": "string",
  "status": true,
  "code": 403
}
```


## Return all assets filtered by a given site mrid
This Endpoint is to be used whenever an FSP wants to retrieve a single asset from the LocalFlex platform, based on the filtering from its mrid.

`GET` `/asset/portfolio{MRID}`

**Parameter** 
|Parameter|description|
|---|---|
|mrid|mrid of the site associated with the assets|

**Responses:**

`200` successful operation
```
{
  "result": asset{...},
  "status": true,
  "code": 200
}
```

`401` Access token is missing or invalid
```
{
  "result": "string",
  "status": true,
  "code": 401
}
```
`403` You don't have have the permission to access the response
```
{
  "result": "string",
  "status": true,
  "code": 403
}
```


## Create a portfolio

This Endpoint is to be used whenever an FSP wants to create a new portfolio (bidding unit) into the LocalFlex platform.

`POST` `/portfolio`

**Requested body schema of an** `portfolio`:
|Field|Description |Allowable responses/examples|
|---|---|---|
|mrid (*string*)|identifier of the portfolio|"5kb85f65-4632-4562-c6ji-1t764y92zyq3"|
|name (*string*)|Name of the portfolio chosen by the FSP|MyPortfolio1|
|organisationMRID (*string*)|Identifier of the organisation|"CompanyFSP14"|
|marketRegionMrid (*string*)|Identifier of the Market Region |"5kb85f65-4632-4562-c6ji-1t764y92zyq3"|































